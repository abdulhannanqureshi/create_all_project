{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\coinfield\\\\coinfied\\\\frontend\\\\src\\\\views\\\\AddCard\\\\AddCard.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport TextField from '@material-ui/core/TextField';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Typography from '@material-ui/core/Typography';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport DeleteOutlineTwoToneIcon from '@material-ui/icons/DeleteOutlineTwoTone';\nimport LocalMallOutlinedIcon from '@material-ui/icons/LocalMallOutlined';\nimport clsx from 'clsx';\nimport { Modal } from 'components/common';\nimport { Section } from 'components/organisms';\nimport Toast from 'components/toaster';\nimport { ApiRoutes } from 'config';\nimport { ApiHelper } from 'helper';\nimport Link from 'next/link';\nimport React, { useEffect, useState } from 'react';\nimport validate from 'validate.js';\nimport { useStore } from '../../store';\nimport { OrderDetail } from \"./components\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1\n  },\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary\n  },\n  box: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  box_shadow: {\n    boxShadow: \"rgba(0, 0, 0, 0.02) 0px 1px 3px 0px, rgba(27, 31, 35, 0.15) 0px 0px 0px 1px\"\n  },\n  commonBtn: {\n    display: \"inline-block\",\n    padding: 10,\n    backgroundColor: \"#5120FF\",\n    color: \"#fff\",\n    fontSize: 16,\n    borderRadius: 5,\n    minWidth: 200,\n    border: \"solid 1px #5120FF\",\n    textAlign: \"center\",\n    transition: \"all 0.3s ease-in-out\",\n    \"&:hover\": {\n      backgroundColor: \"#fff\",\n      color: \"#5120FF\"\n    }\n  },\n  cardHeading: {\n    marginLeft: \"22px\"\n  },\n  headingCard: {\n    fontSize: \"30px !important\",\n    marginLeft: \"8px\",\n    marginTop: \"5px\"\n  },\n  flex: {\n    display: \"flex\",\n    alignItems: \"center\"\n  },\n  redIcon: {\n    color: \"red\"\n  },\n  disabledIcon: {\n    color: \"red\",\n    opacity: \"0.4\",\n    cursor: \"not-allowed\"\n  },\n  table: {\n    minWidth: 650\n  },\n  shoppingIcon: {\n    fontSize: \"30px\"\n  },\n  promoCodeBlock: {\n    fontSize: \"16px\"\n  },\n  centering: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  space_between: {\n    display: \"flex\"\n  },\n  calculationBlock: {\n    paddingBottom: \"15px\"\n  },\n  calcTitle: {\n    paddingRight: \"20px\",\n    textAlign: \"right\",\n    width: \"calc(100% - 150px)\",\n    fontSize: '17px'\n  },\n  collapseSmooth: {\n    transition: \"all 3s ease-out\",\n    boxShadow: 'none'\n  },\n  calcValue: {\n    width: \"150px\",\n    fontSize: '17px',\n    fontWeight: '600',\n    textAlign: 'right',\n    paddingRight: 25\n  },\n  error_msg: {\n    color: \"red\"\n  },\n  success_msg: {\n    color: \"green\"\n  },\n  promoCode: {\n    padding: \"5px 10px\",\n    fontWeight: \"900\",\n    color: \"#f95c20\",\n    border: \"1px solid #f96b36\",\n    margin: \"0px 5px\",\n    borderRadius: \"20px\"\n  },\n  noPromoCode: {\n    opacity: \"0.4\",\n    fontSize: 18,\n    marginLeft: 5\n  },\n  cardHeader: {\n    backgroundColor: \"#5120ff\"\n  },\n  text_white: {\n    color: \"white\"\n  },\n  rightSide: {\n    display: \"flex\",\n    justifyContent: \"end\"\n  },\n  buttonBox: {\n    display: \"flex\",\n    justifyContent: \"end\"\n  },\n  distance_apart: {\n    display: \"flex\",\n    justifyContent: \"space-between\"\n  },\n  margin_right: {\n    marginRight: \"32px\",\n    paddingRight: \"20px\"\n  },\n  emptyCart: {\n    padding: \"30px 20px\",\n    textAlign: \"center\"\n  },\n  apply_field: {\n    \"& .MuiOutlinedInput-root\": {\n      borderTopRightRadius: 0,\n      borderBottomRightRadius: 0\n    }\n  },\n  apply_promo_btn: {\n    minWidth: 120,\n    borderTopLeftRadius: 0,\n    borderBottomLeftRadius: 0,\n    boxShadow: 'none'\n  },\n  paymentLoader: {\n    position: 'fixed',\n    zIndex: '10',\n    top: '0',\n    left: '0',\n    width: '100%',\n    height: '100%',\n    background: 'rgba(0,0,0,0.4)',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    flexDirection: 'column'\n  }\n}));\nconst schema = {\n  cardHolderName: {\n    presence: {\n      allowEmpty: false,\n      message: 'is required'\n    },\n    length: {\n      maximum: 120\n    }\n  },\n  cardNumber: {\n    presence: {\n      allowEmpty: false,\n      message: 'is required'\n    },\n    length: {\n      minimum: 19,\n      maximum: 19\n    }\n  },\n  expiry: {\n    presence: {\n      allowEmpty: false,\n      message: 'is required'\n    }\n  },\n  cvc: {\n    presence: {\n      allowEmpty: false,\n      message: 'is required'\n    },\n    length: {\n      minimum: 3,\n      maximum: 3\n    }\n  }\n};\n\nconst AddCard = props => {\n  const {\n    authToken\n  } = props;\n  const classes = useStyles();\n  const theme = useTheme();\n  const {\n    0: promoCode,\n    1: setPromoCode\n  } = useState([]);\n  const {\n    0: OrderTotal,\n    1: setOrderTotal\n  } = useState(\"\");\n  const {\n    0: loader,\n    1: setLoader\n  } = useState(false);\n  const {\n    0: couponLoader,\n    1: setCouponLoader\n  } = useState(false);\n  const {\n    0: formError,\n    1: setFormError\n  } = useState('');\n  const {\n    0: error,\n    1: setError\n  } = useState('');\n  const {\n    0: successMsg,\n    1: setSuccessMsg\n  } = useState('');\n  const {\n    0: coupanValue,\n    1: setCoupanValue\n  } = useState('');\n  const {\n    0: coupanCode,\n    1: setCoupanCode\n  } = useState('');\n  const {\n    0: promoId,\n    1: setPromoId\n  } = useState('');\n  const [formState, setFormState] = React.useState({\n    isValid: false,\n    values: {},\n    touched: {},\n    errors: {}\n  });\n  const isMd = useMediaQuery(theme.breakpoints.up('md'), {\n    defaultMatches: true\n  });\n  const {\n    0: SelectedData,\n    1: setSelectedData\n  } = useState([]);\n  const {\n    0: parentid,\n    1: setParentId\n  } = useState([]);\n  const {\n    0: moduleIdApi,\n    1: setModuleIdApi\n  } = useState([]);\n  const {\n    0: generalPromoCode,\n    1: setGeneralPromoCode\n  } = useState([]);\n  const {\n    0: isCompleteCourse,\n    1: setIscompleteCourse\n  } = useState(false);\n  const {\n    0: completeCourseDetails,\n    1: setCompleteCourseDetails\n  } = useState([]);\n  const {\n    0: orderModalOpen,\n    1: setOrderModalOpen\n  } = useState(false);\n  const {\n    0: checkoutModules,\n    1: setCheckoutModules\n  } = useState([]);\n  const {\n    0: loaderDashboard,\n    1: setLoaderDashboard\n  } = useState(false);\n\n  const handleLoader = status => {\n    setLoaderDashboard(status);\n\n    if (status) {\n      setSelectedData([]);\n    }\n  };\n\n  const {\n    0: cancelBtn,\n    1: setCancelBtn\n  } = useState(false);\n\n  const handleCancelBtn = status => {\n    setCancelBtn(status);\n  };\n\n  const getTotalPrice = (cartList, parentId) => {\n    const cartModule = cartList.filter(ev => ev.parentId === parentId || ev._id === parentId);\n    if (!cartModule.length) return 0;\n    return cartModule.map(e => e.amount).reduce((n, r) => +n + +r);\n  };\n\n  const getTotal = cartList => {\n    const getAllCourse = JSON.parse(localStorage.getItem(\"allCourseModules\"));\n\n    if (getAllCourse && getAllCourse.length) {\n      let allModulesData = getAllCourse.map(e => ({\n        parentId: e._id,\n        moduleLength: e.modules ? e.modules.length : \"\",\n        price: e.price\n      }));\n      const cartDistribute = allModulesData.map(e => ({\n        parentId: e.parentId,\n        moduleLength: e.moduleLength,\n        courses: cartList.filter(ev => ev.parentId === e.parentId),\n        price: e.moduleLength && e.moduleLength === cartList.filter(ev => ev.parentId === e.parentId).filter(e => !e.labId).length ? +e.price : getTotalPrice(cartList, e.parentId)\n      }));\n      return cartDistribute.map(e => e.price).length ? cartDistribute.map(e => e.price).reduce((n, p) => +n + +p) : 0;\n    }\n\n    return 0;\n  };\n\n  const getOrderTotal = cartList => {\n    const getAllCourse = JSON.parse(localStorage.getItem(\"allCourseModules\"));\n\n    if (getAllCourse && getAllCourse.length) {\n      let allModulesData = getAllCourse.map(e => ({\n        parentId: e._id,\n        moduleLength: e.modules ? e.modules.length : \"\",\n        price: e.price,\n        totalModuleAmount: e.modules.length ? e.modules.map(ev => ev.amount).reduce((n, p) => +n + +p) : \"\"\n      }));\n      const cartDistribute = allModulesData.map(e => ({\n        parentId: e.parentId,\n        moduleLength: e.moduleLength,\n        courses: cartList.filter(ev => ev.parentId === e.parentId),\n        price: e.moduleLength && e.moduleLength === cartList.filter(ev => ev.parentId === e.parentId).filter(e => !e.labId).length ? +e.totalModuleAmount : getTotalPrice(cartList, e.parentId)\n      }));\n      return cartDistribute.map(e => e.price).length ? cartDistribute.map(e => e.price).reduce((n, p) => +n + +p) : 0;\n    }\n\n    return 0;\n  }; // For Save Money\n  // const isSaveMoney = (cartList) => {\n  //   const totalCartAmount = cartList.map(e => e.amount).reduce((n, p) => +n + +p);\n  //   const disCartAmount = getTotal(cartList);\n  //   return totalCartAmount - disCartAmount;\n  // }\n  // For lab free\n\n\n  const isLabFree = (parentId, cartList) => {\n    const getAllCourse = JSON.parse(localStorage.getItem(\"allCourseModules\"));\n    let moduleLength = \"\";\n\n    if (getAllCourse && getAllCourse.length) {\n      moduleLength = getAllCourse.find(e => e._id === parentId).modules.length;\n    }\n\n    let catModuleLength = cartList.filter(ev => ev.parentId === parentId).filter(e => !e.labId).length;\n    return moduleLength === catModuleLength;\n  }; //getting data from local storage\n\n\n  useEffect(() => {\n    const getSessionStored = JSON.parse(localStorage.getItem(\"SelectedCourseModules\"));\n    const allCourseModules = JSON.parse(localStorage.getItem(\"allCourseModules\"));\n\n    if (allCourseModules !== null) {\n      setCompleteCourseDetails(allCourseModules);\n    }\n\n    const GeneralPromoCode = JSON.parse(localStorage.getItem(\"GeneralPromoCode\"));\n\n    if (GeneralPromoCode !== null) {\n      setGeneralPromoCode(GeneralPromoCode);\n    }\n\n    const promoCode = JSON.parse(localStorage.getItem(\"promoCode\"));\n    const ParentIds = JSON.parse(localStorage.getItem(\"parentIds\"));\n\n    if (getSessionStored && getSessionStored.length) {\n      setSelectedData(getSessionStored);\n    }\n\n    if (promoCode && promoCode.length) {\n      setPromoCode(promoCode);\n    }\n  }, []); //re-rendering after the deleting from the cards\n\n  useEffect(() => {\n    if (SelectedData && SelectedData.length) {\n      localStorage.setItem(\"SelectedCourseModules\", JSON.stringify(SelectedData));\n\n      if (SelectedData.length) {\n        let Code = SelectedData.map(xyz => {\n          return xyz.promoCode;\n        });\n        let arrayPromoCode = [].concat(...removeDuplicates(Code, \"promoCode\"));\n\n        if (arrayPromoCode && arrayPromoCode.length) {\n          setPromoCode(arrayPromoCode);\n        }\n\n        let countTotal = SelectedData.map(item => item.amount).reduce((prev, next) => parseInt(prev) + parseInt(next));\n        setOrderTotal(countTotal);\n        let parentIdentity = SelectedData.map(xyz => xyz.parentId);\n        let resultingParentIds = removeDuplicates(parentIdentity, \"parentId\");\n        setParentId(resultingParentIds);\n      }\n    } else {\n      setOrderTotal(\"\");\n    }\n  }, [SelectedData]);\n  useEffect(() => {\n    const errors = validate(formState.values, schema);\n    setFormState(formState => _objectSpread(_objectSpread({}, formState), {}, {\n      isValid: errors ? false : true,\n      errors: errors || {}\n    }));\n  }, [formState.values]); ///remove duplicacy\n\n  function removeDuplicates(originalArray) {\n    var seen = {};\n    return originalArray.filter(function (item) {\n      return seen.hasOwnProperty(item) ? false : seen[item] = true;\n    });\n  } //removing course from cards\n\n\n  const deleteSelected = id => {\n    if (SelectedData && SelectedData.length) {\n      const result = SelectedData.filter(data => data._id !== id);\n      setSelectedData(result);\n      setCoupanCode('');\n      setPromoId('');\n      setCoupanValue('');\n      setFormState(_objectSpread(_objectSpread({}, formState), {}, {\n        values: {}\n      }));\n\n      if (result.length === 0) {\n        localStorage.setItem(\"SelectedCourseModules\", JSON.stringify([]));\n      }\n    }\n  }; //handling text for the coupon\n\n\n  const handleChange = event => {\n    event.persist();\n    setCoupanValue(event.target.value);\n    setFormState(formState => _objectSpread(_objectSpread({}, formState), {}, {\n      values: _objectSpread(_objectSpread({}, formState.values), {}, {\n        [event.target.name]: event.target.value\n      }),\n      touched: _objectSpread(_objectSpread({}, formState.touched), {}, {\n        [event.target.name]: true\n      })\n    }));\n    setFormError('');\n  }; // For get parent ids\n\n\n  const {\n    0: moduleParentIds,\n    1: setModuleParentIds\n  } = useState([]);\n  useEffect(props => {\n    let getParentsId = JSON.parse(localStorage.getItem('parentIds'));\n\n    if (getParentsId && getParentsId.length) {\n      setModuleParentIds(getParentsId);\n    }\n  }, []); ///filtering id wrt to parent id\n\n  const filterIds = () => {\n    let testingArray = [];\n    const result = group(SelectedData, 'parentId');\n\n    function group(arr, key) {\n      return [...arr.reduce((acc, o) => acc.set(o[key], (acc.get(o[key]) || []).concat(o)), new Map()).values()];\n    }\n\n    let getWithOutLabelId = SelectedData.filter(e => !e.labId);\n    let getLabelId = SelectedData.filter(e => e.labId);\n    let getLabObj = [];\n    getLabelId.map(e => {\n      getLabObj.push({\n        parentId: e._id,\n        labId: e.labId\n      });\n    });\n    let moduleIds = [];\n    moduleParentIds.map(parentId => {\n      let getLabIds = getLabObj.filter(e => e.parentId === parentId);\n      let getModules = getWithOutLabelId.filter(e => e.parentId === parentId);\n\n      if (getModules && getModules.length) {\n        let getIds = getModules.map(e => e._id);\n        moduleIds.push({\n          moduleIds: getIds,\n          courseId: parentId\n        });\n      } else {\n        if (getLabIds && getLabIds.length) {\n          moduleIds.push({\n            moduleIds: [],\n            courseId: parentId\n          });\n        }\n      }\n    }); ////Balvinder  starts coding\n\n    const apiDataPureArray = [];\n    const courseData = completeCourseDetails.map(e => {\n      return apiDataPureArray.push({\n        parentId: e._id,\n        moduleLength: e.modules ? e.modules.length : \"\"\n      });\n    });\n\n    const FinalFunction = cartItem => {\n      let labPurchasedVariable = completeCourseDetails.filter(e => e._id === cartItem.courseId);\n      const labPurchasedValue = labPurchasedVariable[0].lab.labPurchased;\n      let getCurrentItem = apiDataPureArray.filter(e => e.parentId === cartItem.courseId);\n\n      if (!labPurchasedValue) {\n        if (getCurrentItem[0].moduleLength === cartItem.moduleIds.length) return true;\n      } else return false;\n    }; ////Balvinder  ends the coding....\n\n\n    if (moduleIds && moduleIds.length) {\n      moduleIds.map(e => {\n        let labId = completeCourseDetails.filter(ev => ev._id === e.courseId).map(labId => labId.lab._id);\n\n        if (typeof labId[0] == \"undefined\") {\n          labId = null;\n        }\n\n        let getLabId = getLabObj.filter(item => item.parentId === e.courseId).map(e => e.labId);\n        testingArray.push(_objectSpread(_objectSpread({}, e), {}, {\n          moduleIds: e.moduleIds.length ? e.moduleIds : null,\n          labId: FinalFunction(e) ? labId : getLabId[0] ? getLabId[0] : null,\n          isCourseComplete: FinalFunction(e)\n        }));\n      });\n    } else {\n      getLabObj.map(e => {\n        testingArray.push({\n          moduleIds: null,\n          courseId: e.parentId,\n          labId: e.labId,\n          isCourseComplete: false\n        });\n      });\n    }\n\n    return testingArray;\n  }; //handle coupan after the button click\n\n\n  const handleApplyCoupon = () => {\n    if (!formState.values.couponValue) {\n      setError(\"Please enter a valid Coupon code\");\n    } else {\n      let one = filterIds();\n      setCouponLoader(true);\n      setCoupanValue(formState.values.couponValue);\n      applyCoupon({\n        'promoCode': formState.values.couponValue,\n        'moduleId': one\n      });\n    }\n  }; //for applying promocode\n\n\n  const applyCoupon = async data => {\n    const response = await new ApiHelper().FetchFromServer(ApiRoutes.APPLYCOUPON.service, ApiRoutes.APPLYCOUPON.url, ApiRoutes.APPLYCOUPON.method, ApiRoutes.APPLYCOUPON.authenticate, authToken, undefined, data);\n\n    if (response && !response.isError) {\n      const data = response.data.data;\n      setCoupanCode(data);\n      setCouponLoader(false);\n      setSuccessMsg(response.data.message);\n      setPromoId(response.data.data.promoId);\n      Toast.fire({\n        icon: 'success',\n        title: response.messages[0]\n      });\n      setError(\"\");\n    } else {\n      setError(\"\");\n      Toast.fire({\n        icon: 'error',\n        title: response.messages[0]\n      });\n      setCouponLoader(false);\n    }\n  }; //copying promocode\n\n\n  const copyToClipboard = code => {\n    navigator.clipboard.writeText(code);\n    Toast.fire({\n      icon: 'success',\n      title: \"Promo Code copied.\"\n    });\n  }; ///order modal opening\n\n\n  const orderDetailOpen = () => {\n    const token = localStorage.getItem(\"token\");\n\n    if (token) {\n      let one = filterIds();\n      setCheckoutModules(one);\n      setOrderModalOpen(true);\n    }\n  }; // const [count, setCount] = useState(0)\n\n\n  const handleOrderModalClose = () => {\n    setOrderModalOpen(false);\n  }; // For Cart Icon item remove\n\n\n  const {\n    removeCartHandler\n  } = useStore();\n  return __jsx(React.Fragment, null, __jsx(Section, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 630,\n      columnNumber: 7\n    }\n  }, loaderDashboard ? __jsx(\"div\", {\n    className: classes.paymentLoader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 632,\n      columnNumber: 11\n    }\n  }, __jsx(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 633,\n      columnNumber: 13\n    }\n  }, __jsx(CircularProgress, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 634,\n      columnNumber: 15\n    }\n  }))) : \"\", __jsx(Card, {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 639,\n      columnNumber: 9\n    }\n  }, __jsx(CardHeader, {\n    className: classes.cardHeader,\n    title: __jsx(\"div\", {\n      className: clsx(classes.flex, classes.text_white),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 642,\n        columnNumber: 15\n      }\n    }, __jsx(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 643,\n        columnNumber: 17\n      }\n    }, \"Cart\"), __jsx(LocalMallOutlinedIcon, {\n      className: classes.headingCard,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 644,\n        columnNumber: 17\n      }\n    })),\n    titleTypographyProps: {\n      variant: 'h4'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 640,\n      columnNumber: 11\n    }\n  }), __jsx(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 649,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: classes.root,\n    className: classes.box,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 650,\n      columnNumber: 13\n    }\n  }, __jsx(Box, {\n    width: 1100,\n    className: classes.box_shadow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 651,\n      columnNumber: 15\n    }\n  }, __jsx(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 652,\n      columnNumber: 17\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 653,\n      columnNumber: 19\n    }\n  }, __jsx(TableContainer, {\n    component: Paper,\n    className: classes.collapseSmooth,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 654,\n      columnNumber: 21\n    }\n  }, __jsx(Table, {\n    className: classes.table,\n    \"aria-label\": \"simple table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 655,\n      columnNumber: 23\n    }\n  }, __jsx(TableHead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 656,\n      columnNumber: 25\n    }\n  }, __jsx(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 657,\n      columnNumber: 27\n    }\n  }, __jsx(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 658,\n      columnNumber: 29\n    }\n  }, \"S.No\"), __jsx(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 659,\n      columnNumber: 29\n    }\n  }, \"Course name\"), __jsx(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 660,\n      columnNumber: 29\n    }\n  }, \"Module name\"), __jsx(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 661,\n      columnNumber: 29\n    }\n  }, \"Price($)\"), __jsx(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 662,\n      columnNumber: 29\n    }\n  }, \"Remove\"))), __jsx(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 665,\n      columnNumber: 25\n    }\n  }, SelectedData && SelectedData.length ? SelectedData.map((row, index) => __jsx(TableRow, {\n    key: row._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 667,\n      columnNumber: 29\n    }\n  }, __jsx(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 668,\n      columnNumber: 31\n    }\n  }, index + 1), __jsx(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 671,\n      columnNumber: 31\n    }\n  }, row.title), __jsx(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 672,\n      columnNumber: 31\n    }\n  }, row.moduleName), !row.labId ? __jsx(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 674,\n      columnNumber: 34\n    }\n  }, row.amount) : isLabFree(row._id, SelectedData) ? __jsx(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 678,\n      columnNumber: 37\n    }\n  }, __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 679,\n      columnNumber: 38\n    }\n  }, \"Included\")) : __jsx(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 683,\n      columnNumber: 36\n    }\n  }, row.amount), __jsx(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 685,\n      columnNumber: 31\n    }\n  }, __jsx(\"div\", {\n    title: \"remove\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 686,\n      columnNumber: 33\n    }\n  }, !row.labId ? __jsx(DeleteOutlineTwoToneIcon, {\n    className: classes.redIcon,\n    onClick: () => {\n      deleteSelected(row._id);\n      removeCartHandler();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 688,\n      columnNumber: 38\n    }\n  }) : isLabFree(row._id, SelectedData) ? __jsx(DeleteOutlineTwoToneIcon, {\n    className: classes.disabledIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 697,\n      columnNumber: 40\n    }\n  }) : __jsx(DeleteOutlineTwoToneIcon, {\n    className: classes.redIcon,\n    onClick: () => {\n      deleteSelected(row._id);\n      removeCartHandler();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 698,\n      columnNumber: 40\n    }\n  }))))) : __jsx(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 710,\n      columnNumber: 29\n    }\n  }, __jsx(TableCell, {\n    colSpan: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 711,\n      columnNumber: 31\n    }\n  }, __jsx(\"div\", {\n    className: classes.emptyCart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 712,\n      columnNumber: 33\n    }\n  }, __jsx(Typography, {\n    variant: \"h5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 713,\n      columnNumber: 35\n    }\n  }, \"Your Cart is empty\"))))))), __jsx(Grid, {\n    container: true,\n    mt: 5,\n    className: classes.distance_apart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 726,\n      columnNumber: 21\n    }\n  }, OrderTotal > 0 ? __jsx(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 728,\n      columnNumber: 25\n    }\n  }, __jsx(Box, {\n    display: \"flex\",\n    justifyContent: \"center\",\n    ml: 2,\n    mt: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 729,\n      columnNumber: 27\n    }\n  }, __jsx(TextField, {\n    placeholder: \"Coupon Code\",\n    label: \"Coupon Code\",\n    variant: \"outlined\",\n    size: \"medium\",\n    name: \"couponValue\",\n    fullWidth: true,\n    type: \"couponValue\",\n    onChange: handleChange,\n    value: coupanValue ? coupanValue : formState.values.couponValue || '',\n    className: classes.apply_field,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 730,\n      columnNumber: 29\n    }\n  }), couponLoader ? __jsx(Button, {\n    variant: \"contained\",\n    color: \"secondary\",\n    className: classes.apply_btn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 743,\n      columnNumber: 31\n    }\n  }, \"Processing....\") : __jsx(Button, {\n    variant: \"contained\",\n    color: \"secondary\",\n    className: classes.apply_promo_btn,\n    onClick: handleApplyCoupon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 747,\n      columnNumber: 31\n    }\n  }, \"Apply Code\")), __jsx(Box, {\n    display: \"flex\",\n    ml: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 753,\n      columnNumber: 27\n    }\n  }, __jsx(\"p\", {\n    className: classes.error_msg,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 754,\n      columnNumber: 29\n    }\n  }, error))) : null, __jsx(Grid, {\n    xs: 6,\n    item: true,\n    mt: 5,\n    className: classes.centering,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 758,\n      columnNumber: 23\n    }\n  }, OrderTotal > 0 ? __jsx(Grid, {\n    xs: 12,\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 760,\n      columnNumber: 27\n    }\n  }, __jsx(Box, {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    className: classes.calculationBlock,\n    mt: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 761,\n      columnNumber: 29\n    }\n  }, __jsx(Box, {\n    className: classes.calcTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 768,\n      columnNumber: 31\n    }\n  }, \"Order total:\"), __jsx(Box, {\n    className: classes.calcValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 771,\n      columnNumber: 31\n    }\n  }, getOrderTotal(SelectedData) ? `$${getTotal(SelectedData).toFixed(2)}` : 'N.A')), __jsx(Box, {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    className: classes.calculationBlock,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 776,\n      columnNumber: 29\n    }\n  }, __jsx(Box, {\n    className: classes.calcTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 782,\n      columnNumber: 31\n    }\n  }, \"Coupon Discount:\"), __jsx(Box, {\n    className: classes.calcValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 785,\n      columnNumber: 31\n    }\n  }, \"$\", coupanCode.discountedAmount ? coupanCode.discountedAmount.toFixed(2) : \"0.00\")), __jsx(Box, {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    className: classes.calculationBlock,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 789,\n      columnNumber: 29\n    }\n  }, __jsx(Box, {\n    className: classes.calcTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 795,\n      columnNumber: 31\n    }\n  }, \"Grand total:\"), __jsx(Box, {\n    className: classes.calcValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 798,\n      columnNumber: 31\n    }\n  }, coupanCode.grandTotal ? `$${coupanCode.grandTotal.toFixed(2)}` : getTotal(SelectedData) ? `$${getTotal(SelectedData).toFixed(2)}` : \"0.00\"))) : null)), __jsx(Box, {\n    className: classes.buttonBox,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 807,\n      columnNumber: 21\n    }\n  }, __jsx(Box, {\n    my: 1,\n    mx: 2,\n    className: classes.rightSide,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 808,\n      columnNumber: 23\n    }\n  }, __jsx(Link, {\n    href: \"/courses\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 809,\n      columnNumber: 25\n    }\n  }, __jsx(\"a\", {\n    className: clsx(classes.commonBtn),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 810,\n      columnNumber: 27\n    }\n  }, \"Continue Shopping\"))), OrderTotal > 0 ? __jsx(Box, {\n    my: 1,\n    mx: 2,\n    className: classes.rightSide,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 814,\n      columnNumber: 25\n    }\n  }, __jsx(Button, {\n    variant: \"outlined\",\n    onClick: orderDetailOpen,\n    className: classes.commonBtn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 815,\n      columnNumber: 27\n    }\n  }, \"Checkout\")) : null)))))))), __jsx(Modal, {\n    fullWidth: false,\n    maxWidth: \"sm\",\n    open: orderModalOpen,\n    handleClose: !cancelBtn ? handleOrderModalClose : null,\n    iFrame: false,\n    title: \"\",\n    content: __jsx(OrderDetail, {\n      modualData: \"this\",\n      selectedId: checkoutModules,\n      courseId: \"\",\n      handleOrderModalClose: handleOrderModalClose,\n      courseTitle: \"\",\n      promoId: promoId ? promoId : null,\n      handleLoader: handleLoader,\n      handleCancelBtn: handleCancelBtn,\n      authToken: authToken,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 840,\n        columnNumber: 11\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 832,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default AddCard;","map":{"version":3,"sources":["C:/xampp/htdocs/coinfield/coinfied/frontend/src/views/AddCard/AddCard.js"],"names":["Box","Button","Card","CardContent","CardHeader","CircularProgress","Grid","Paper","makeStyles","useTheme","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","TextField","Tooltip","Typography","useMediaQuery","DeleteOutlineTwoToneIcon","LocalMallOutlinedIcon","clsx","Modal","Section","Toast","ApiRoutes","ApiHelper","Link","React","useEffect","useState","validate","useStore","OrderDetail","useStyles","theme","root","flexGrow","paper","padding","spacing","textAlign","color","palette","text","secondary","box","display","alignItems","justifyContent","box_shadow","boxShadow","commonBtn","backgroundColor","fontSize","borderRadius","minWidth","border","transition","cardHeading","marginLeft","headingCard","marginTop","flex","redIcon","disabledIcon","opacity","cursor","table","shoppingIcon","promoCodeBlock","centering","space_between","calculationBlock","paddingBottom","calcTitle","paddingRight","width","collapseSmooth","calcValue","fontWeight","error_msg","success_msg","promoCode","margin","noPromoCode","cardHeader","text_white","rightSide","buttonBox","distance_apart","margin_right","marginRight","emptyCart","apply_field","borderTopRightRadius","borderBottomRightRadius","apply_promo_btn","borderTopLeftRadius","borderBottomLeftRadius","paymentLoader","position","zIndex","top","left","height","background","flexDirection","schema","cardHolderName","presence","allowEmpty","message","length","maximum","cardNumber","minimum","expiry","cvc","AddCard","props","authToken","classes","setPromoCode","OrderTotal","setOrderTotal","loader","setLoader","couponLoader","setCouponLoader","formError","setFormError","error","setError","successMsg","setSuccessMsg","coupanValue","setCoupanValue","coupanCode","setCoupanCode","promoId","setPromoId","formState","setFormState","isValid","values","touched","errors","isMd","breakpoints","up","defaultMatches","SelectedData","setSelectedData","parentid","setParentId","moduleIdApi","setModuleIdApi","generalPromoCode","setGeneralPromoCode","isCompleteCourse","setIscompleteCourse","completeCourseDetails","setCompleteCourseDetails","orderModalOpen","setOrderModalOpen","checkoutModules","setCheckoutModules","loaderDashboard","setLoaderDashboard","handleLoader","status","cancelBtn","setCancelBtn","handleCancelBtn","getTotalPrice","cartList","parentId","cartModule","filter","ev","_id","map","e","amount","reduce","n","r","getTotal","getAllCourse","JSON","parse","localStorage","getItem","allModulesData","moduleLength","modules","price","cartDistribute","courses","labId","p","getOrderTotal","totalModuleAmount","isLabFree","find","catModuleLength","getSessionStored","allCourseModules","GeneralPromoCode","ParentIds","setItem","stringify","Code","xyz","arrayPromoCode","concat","removeDuplicates","countTotal","item","prev","next","parseInt","parentIdentity","resultingParentIds","originalArray","seen","hasOwnProperty","deleteSelected","id","result","data","handleChange","event","persist","target","value","name","moduleParentIds","setModuleParentIds","getParentsId","filterIds","testingArray","group","arr","key","acc","o","set","get","Map","getWithOutLabelId","getLabelId","getLabObj","push","moduleIds","getLabIds","getModules","getIds","courseId","apiDataPureArray","courseData","FinalFunction","cartItem","labPurchasedVariable","labPurchasedValue","lab","labPurchased","getCurrentItem","getLabId","isCourseComplete","handleApplyCoupon","couponValue","one","applyCoupon","response","FetchFromServer","APPLYCOUPON","service","url","method","authenticate","undefined","isError","fire","icon","title","messages","copyToClipboard","code","navigator","clipboard","writeText","orderDetailOpen","token","handleOrderModalClose","removeCartHandler","variant","row","index","moduleName","apply_btn","toFixed","discountedAmount","grandTotal"],"mappings":"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","sourcesContent":["import Box from '@material-ui/core/Box';\r\nimport Button from '@material-ui/core/Button';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\r\nimport DeleteOutlineTwoToneIcon from '@material-ui/icons/DeleteOutlineTwoTone';\r\nimport LocalMallOutlinedIcon from '@material-ui/icons/LocalMallOutlined';\r\nimport clsx from 'clsx';\r\nimport { Modal } from 'components/common';\r\nimport { Section } from 'components/organisms';\r\nimport Toast from 'components/toaster';\r\nimport { ApiRoutes } from 'config';\r\nimport { ApiHelper } from 'helper';\r\nimport Link from 'next/link';\r\nimport React, { useEffect, useState } from 'react';\r\nimport validate from 'validate.js';\r\nimport { useStore } from '../../store';\r\nimport { OrderDetail } from \"./components\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    textAlign: 'center',\r\n    color: theme.palette.text.secondary,\r\n  },\r\n  box:\r\n  {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\"\r\n  },\r\n  box_shadow: {\r\n    boxShadow: \"rgba(0, 0, 0, 0.02) 0px 1px 3px 0px, rgba(27, 31, 35, 0.15) 0px 0px 0px 1px\"\r\n  },\r\n  commonBtn: {\r\n    display: \"inline-block\",\r\n    padding: 10,\r\n    backgroundColor: \"#5120FF\",\r\n    color: \"#fff\",\r\n    fontSize: 16,\r\n    borderRadius: 5,\r\n    minWidth: 200,\r\n    border: \"solid 1px #5120FF\",\r\n    textAlign: \"center\",\r\n    transition: \"all 0.3s ease-in-out\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"#fff\",\r\n      color: \"#5120FF\",\r\n    },\r\n  },\r\n  cardHeading:{\r\n    marginLeft: \"22px\"\r\n  },\r\n  headingCard:{\r\n    fontSize: \"30px !important\",\r\n    marginLeft: \"8px\",\r\n    marginTop: \"5px\"\r\n  },\r\n  flex:{\r\n    display: \"flex\",\r\n    alignItems: \"center\"\r\n  },\r\n  redIcon:{\r\n    color: \"red\"\r\n  },\r\n  disabledIcon:{\r\n    color: \"red\",\r\n    opacity: \"0.4\",\r\n    cursor: \"not-allowed\",\r\n  },\r\n  table: {\r\n    minWidth: 650,\r\n  },\r\n  shoppingIcon: {\r\n    fontSize: \"30px\",\r\n  },\r\n  promoCodeBlock: {\r\n    fontSize: \"16px\"\r\n  },\r\n  centering: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\"\r\n  },\r\n  space_between:\r\n  {\r\n    display: \"flex\"\r\n  },\r\n  calculationBlock: {\r\n    paddingBottom: \"15px\"\r\n  },\r\n  calcTitle: {\r\n    paddingRight: \"20px\",\r\n    textAlign: \"right\",\r\n    width: \"calc(100% - 150px)\",\r\n    fontSize: '17px'\r\n  },\r\n  collapseSmooth: {\r\n    transition: \"all 3s ease-out\",\r\n    boxShadow: 'none',\r\n  },\r\n  calcValue: {\r\n    width: \"150px\",\r\n    fontSize: '17px',\r\n    fontWeight: '600',\r\n    textAlign: 'right',\r\n    paddingRight: 25,\r\n  },\r\n  error_msg: {\r\n    color: \"red\"\r\n  },\r\n  success_msg: {\r\n    color: \"green\"\r\n  },\r\n  promoCode: {\r\n    padding: \"5px 10px\",\r\n    fontWeight: \"900\",\r\n    color: \"#f95c20\",\r\n    border: \"1px solid #f96b36\",\r\n    margin: \"0px 5px\",\r\n    borderRadius: \"20px\"\r\n  },\r\n  noPromoCode: {\r\n    opacity: \"0.4\",\r\n    fontSize: 18,\r\n    marginLeft: 5,\r\n  },\r\n  cardHeader: {\r\n    backgroundColor: \"#5120ff\"\r\n  },\r\n  text_white:\r\n  {\r\n    color: \"white\"\r\n  },\r\n  rightSide:\r\n  {\r\n    display: \"flex\",\r\n    justifyContent: \"end\"\r\n  },\r\n  buttonBox:\r\n  {\r\n    display: \"flex\",\r\n    justifyContent: \"end\"\r\n  },\r\n  distance_apart:\r\n  {\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\"\r\n  },\r\n  margin_right:\r\n  {\r\n    marginRight: \"32px\",\r\n    paddingRight: \"20px\"\r\n  },\r\n  emptyCart: {\r\n    padding: \"30px 20px\",\r\n    textAlign: \"center\"\r\n  },\r\n  apply_field: {\r\n    \"& .MuiOutlinedInput-root\": {\r\n      borderTopRightRadius: 0,\r\n      borderBottomRightRadius: 0,\r\n    },\r\n  },\r\n  apply_promo_btn: {\r\n    minWidth: 120,\r\n    borderTopLeftRadius: 0,\r\n    borderBottomLeftRadius: 0,\r\n    boxShadow: 'none',\r\n  },\r\n  paymentLoader: {\r\n    position: 'fixed',\r\n    zIndex: '10',\r\n    top: '0',\r\n    left: '0',\r\n    width: '100%',\r\n    height: '100%',\r\n    background: 'rgba(0,0,0,0.4)',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    flexDirection: 'column',\r\n  },\r\n}));\r\nconst schema = {\r\n  cardHolderName: {\r\n    presence: { allowEmpty: false, message: 'is required' },\r\n    length: {\r\n      maximum: 120,\r\n    },\r\n  },\r\n  cardNumber: {\r\n    presence: { allowEmpty: false, message: 'is required' },\r\n    length: {\r\n      minimum: 19,\r\n      maximum: 19,\r\n    },\r\n  },\r\n  expiry: {\r\n    presence: { allowEmpty: false, message: 'is required' },\r\n  },\r\n  cvc: {\r\n    presence: { allowEmpty: false, message: 'is required' },\r\n    length: {\r\n      minimum: 3,\r\n      maximum: 3,\r\n    },\r\n  },\r\n}\r\n\r\nconst AddCard = (props) => {\r\n  const { authToken } = props;\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const [promoCode, setPromoCode] = useState([]);\r\n  const [OrderTotal, setOrderTotal] = useState(\"\");\r\n  const [loader, setLoader] = useState(false);\r\n  const [couponLoader, setCouponLoader] = useState(false);\r\n  const [formError, setFormError] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [successMsg, setSuccessMsg] = useState('');\r\n  const [coupanValue, setCoupanValue] = useState('');\r\n  const [coupanCode, setCoupanCode] = useState('');\r\n  const [promoId, setPromoId] = useState('');\r\n  const [formState, setFormState] = React.useState({\r\n    isValid: false,\r\n    values: {},\r\n    touched: {},\r\n    errors: {},\r\n  });\r\n  const isMd = useMediaQuery(theme.breakpoints.up('md'), {\r\n    defaultMatches: true,\r\n  });\r\n\r\n  const [SelectedData, setSelectedData] = useState([])\r\n  const [parentid, setParentId] = useState([]);\r\n  const [moduleIdApi, setModuleIdApi] = useState([])\r\n  const [generalPromoCode, setGeneralPromoCode] = useState([]);\r\n  const [isCompleteCourse, setIscompleteCourse] = useState(false);\r\n  const [completeCourseDetails, setCompleteCourseDetails] = useState([]);\r\n  const [orderModalOpen, setOrderModalOpen] = useState(false);\r\n  const [checkoutModules, setCheckoutModules] = useState([]);\r\n\r\n  const [loaderDashboard, setLoaderDashboard] = useState(false);\r\n  const handleLoader = (status) => {\r\n    setLoaderDashboard(status);\r\n    if(status){\r\n      setSelectedData([])\r\n    }\r\n  }\r\n  const [cancelBtn, setCancelBtn] = useState(false);\r\n  const handleCancelBtn = (status) => {\r\n    setCancelBtn(status);\r\n  }\r\n\r\n  const getTotalPrice = (cartList, parentId) => {\r\n    const cartModule = cartList.filter(ev => ev.parentId === parentId || ev._id === parentId)\r\n    if (!cartModule.length) return 0\r\n    return cartModule.map(e => e.amount).reduce((n, r) => +n + +r)\r\n  }\r\n  const getTotal = (cartList) => {\r\n    const getAllCourse = JSON.parse(localStorage.getItem(\"allCourseModules\"));\r\n    if(getAllCourse && getAllCourse.length){\r\n\r\n      let allModulesData = getAllCourse.map(e => ({\r\n        parentId: e._id,\r\n        moduleLength: e.modules ? e.modules.length : \"\",\r\n        price: e.price\r\n      }))\r\n      const cartDistribute = allModulesData.map(e => ({\r\n        parentId: e.parentId,\r\n        moduleLength: e.moduleLength,\r\n        courses: cartList.filter(ev => ev.parentId === e.parentId),\r\n        price: (\r\n          e.moduleLength && e.moduleLength === cartList.filter(ev => ev.parentId === e.parentId).filter(e => !e.labId).length\r\n          ) ? +e.price : getTotalPrice(cartList, e.parentId)\r\n        }))\r\n        return cartDistribute.map(e => e.price).length ? cartDistribute.map(e => e.price).reduce((n, p) => +n + +p) : 0\r\n      }\r\n      return 0;\r\n  }\r\n\r\n  const getOrderTotal = (cartList) => {\r\n    const getAllCourse = JSON.parse(localStorage.getItem(\"allCourseModules\"));\r\n    if(getAllCourse && getAllCourse.length){\r\n      let allModulesData = getAllCourse.map(e => ({\r\n        parentId: e._id,\r\n        moduleLength: e.modules ? e.modules.length : \"\",\r\n        price: e.price,\r\n        totalModuleAmount: e.modules.length ? e.modules.map(ev => ev.amount).reduce((n, p) => +n + +p) : \"\"\r\n      }))\r\n      const cartDistribute = allModulesData.map(e => ({\r\n        parentId: e.parentId,\r\n        moduleLength: e.moduleLength,\r\n        courses: cartList.filter(ev => ev.parentId === e.parentId),\r\n        price: (\r\n          e.moduleLength && e.moduleLength === cartList.filter(ev => ev.parentId === e.parentId).filter(e => !e.labId).length\r\n          ) ? +e.totalModuleAmount : getTotalPrice(cartList, e.parentId)\r\n        }\r\n        ))\r\n        return cartDistribute.map(e => e.price).length ? cartDistribute.map(e => e.price).reduce((n, p) => +n + +p) : 0\r\n      }\r\n      return 0;\r\n  }\r\n  // For Save Money\r\n  // const isSaveMoney = (cartList) => {\r\n  //   const totalCartAmount = cartList.map(e => e.amount).reduce((n, p) => +n + +p);\r\n  //   const disCartAmount = getTotal(cartList);\r\n  //   return totalCartAmount - disCartAmount;\r\n  // }\r\n\r\n  // For lab free\r\n  const isLabFree = (parentId, cartList) => {\r\n    const getAllCourse = JSON.parse(localStorage.getItem(\"allCourseModules\"));\r\n    let moduleLength = \"\";\r\n    if(getAllCourse && getAllCourse.length){\r\n      moduleLength = getAllCourse.find(e => e._id === parentId).modules.length;\r\n    }\r\n    let catModuleLength = cartList.filter(ev => ev.parentId === parentId).filter(e => !e.labId).length\r\n    return moduleLength === catModuleLength\r\n  }\r\n\r\n  //getting data from local storage\r\n  useEffect(() => {\r\n    const getSessionStored = JSON.parse(localStorage.getItem\r\n      (\"SelectedCourseModules\")\r\n    );\r\n    const allCourseModules = JSON.parse(localStorage.getItem\r\n      (\"allCourseModules\")\r\n    );\r\n    if (allCourseModules !== null) {\r\n      setCompleteCourseDetails(allCourseModules)\r\n    }\r\n    const GeneralPromoCode = JSON.parse(localStorage.getItem\r\n      (\"GeneralPromoCode\")\r\n    );\r\n    if (GeneralPromoCode !== null) {\r\n      setGeneralPromoCode(GeneralPromoCode)\r\n    }\r\n    const promoCode = JSON.parse(localStorage.getItem\r\n      (\"promoCode\")\r\n    );\r\n    const ParentIds = JSON.parse(localStorage.getItem\r\n      (\"parentIds\")\r\n    );\r\n    if (getSessionStored && getSessionStored.length) {\r\n      setSelectedData(getSessionStored);\r\n    }\r\n    if (promoCode && promoCode.length) {\r\n      setPromoCode(promoCode)\r\n    }\r\n  }, [])\r\n\r\n  //re-rendering after the deleting from the cards\r\n  useEffect(() => {\r\n    if (SelectedData && SelectedData.length) {\r\n      localStorage.setItem(\r\n        \"SelectedCourseModules\", JSON.stringify(SelectedData)\r\n      );\r\n      if (SelectedData.length) {\r\n        let Code = SelectedData.map((xyz) => {\r\n          return (xyz.promoCode)\r\n        })\r\n        let arrayPromoCode = [].concat(...removeDuplicates(Code, \"promoCode\"))\r\n        if (arrayPromoCode && arrayPromoCode.length) {\r\n          setPromoCode(arrayPromoCode);\r\n        }\r\n        let countTotal = SelectedData.map(item => item.amount).reduce((prev, next) => parseInt(prev) + parseInt(next));\r\n        setOrderTotal(countTotal);\r\n        let parentIdentity = SelectedData.map((xyz) =>\r\n          xyz.parentId\r\n\r\n        )\r\n        let resultingParentIds = removeDuplicates(parentIdentity, \"parentId\")\r\n        setParentId(resultingParentIds);\r\n      }\r\n    }\r\n    else {\r\n      setOrderTotal(\"\");\r\n    }\r\n  }, [SelectedData])\r\n\r\n  useEffect(() => {\r\n    const errors = validate(formState.values, schema);\r\n\r\n    setFormState(formState => ({\r\n      ...formState,\r\n      isValid: errors ? false : true,\r\n      errors: errors || {},\r\n    }));\r\n  }, [formState.values]);\r\n\r\n  ///remove duplicacy\r\n  function removeDuplicates(originalArray) {\r\n    var seen = {};\r\n    return originalArray.filter(function (item) {\r\n      return seen.hasOwnProperty(item) ? false : (seen[item] = true);\r\n    });\r\n  }\r\n\r\n  //removing course from cards\r\n  const deleteSelected = (id) => {\r\n    if (SelectedData && SelectedData.length) {\r\n      const result = SelectedData.filter(data => data._id !== id)\r\n      setSelectedData(result);\r\n      setCoupanCode('');\r\n      setPromoId('')\r\n      setCoupanValue('');\r\n      setFormState({\r\n        ...formState,\r\n        values:{}\r\n      })\r\n      if (result.length === 0) {\r\n        localStorage.setItem(\"SelectedCourseModules\", JSON.stringify([]));\r\n      }\r\n    }\r\n  }\r\n\r\n  //handling text for the coupon\r\n  const handleChange = event => {\r\n    event.persist();\r\n    setCoupanValue(event.target.value)\r\n    setFormState(formState => ({\r\n      ...formState,\r\n      values: {\r\n        ...formState.values,\r\n        [event.target.name]: event.target.value,\r\n      },\r\n      touched: {\r\n        ...formState.touched,\r\n        [event.target.name]: true,\r\n      },\r\n    }));\r\n    setFormError('')\r\n  };\r\n  // For get parent ids\r\n  const [moduleParentIds, setModuleParentIds] = useState([]);\r\n  useEffect((props) => {\r\n    let getParentsId = JSON.parse(localStorage.getItem('parentIds'));\r\n    if (getParentsId && getParentsId.length) {\r\n      setModuleParentIds(getParentsId);\r\n    }\r\n  }, []);\r\n\r\n  ///filtering id wrt to parent id\r\n  const filterIds = () => {\r\n    let testingArray = []\r\n    const result = group(SelectedData, 'parentId');\r\n    function group(arr, key) {\r\n      return [...arr.reduce((acc, o) =>\r\n        acc.set(o[key], (acc.get(o[key]) || []).concat(o))\r\n        , new Map).values()];\r\n    }\r\n    let getWithOutLabelId = SelectedData.filter(e => !e.labId);\r\n    let getLabelId = SelectedData.filter(e => e.labId);\r\n    let getLabObj = []\r\n    getLabelId.map(e => {\r\n      getLabObj.push({\r\n        parentId: e._id,\r\n        labId: e.labId,\r\n      })\r\n    })\r\n\r\n    let moduleIds = []\r\n    moduleParentIds.map(parentId => {\r\n      let getLabIds = getLabObj.filter(e => e.parentId === parentId);\r\n      let getModules = getWithOutLabelId.filter(e => e.parentId === parentId);\r\n      if (getModules && getModules.length) {\r\n        let getIds = getModules.map(e => e._id);\r\n        moduleIds.push(\r\n          {\r\n            moduleIds: getIds,\r\n            courseId: parentId,\r\n          }\r\n        )\r\n      }\r\n      else{\r\n        if(getLabIds && getLabIds.length){\r\n          moduleIds.push(\r\n            {\r\n              moduleIds: [],\r\n              courseId: parentId,\r\n            }\r\n          )\r\n        }\r\n      }\r\n    })\r\n    ////Balvinder  starts coding\r\n    const apiDataPureArray = []\r\n    const courseData = completeCourseDetails.map((e) => {\r\n      return apiDataPureArray.push(\r\n        {\r\n          parentId: e._id,\r\n          moduleLength: e.modules ? e.modules.length : \"\"\r\n        }\r\n      )\r\n    }\r\n    );\r\n    const FinalFunction = (cartItem) => {\r\n\r\n      let labPurchasedVariable=completeCourseDetails.filter(e=> e._id === cartItem.courseId);\r\n      const labPurchasedValue = labPurchasedVariable[0].lab.labPurchased\r\n      let getCurrentItem = apiDataPureArray.filter(e => e.parentId === cartItem.courseId)\r\n      if(!labPurchasedValue){\r\n      if (getCurrentItem[0].moduleLength === cartItem.moduleIds.length) return true\r\n      }\r\n      else return false\r\n    }\r\n    ////Balvinder  ends the coding....\r\n    if (moduleIds && moduleIds.length) {\r\n      moduleIds.map(e => {\r\n        let labId = completeCourseDetails.filter(ev => ev._id === e.courseId).map(labId => labId.lab._id);\r\n        if(typeof(labId[0]) == \"undefined\"){\r\n          labId = null\r\n        }\r\n        let getLabId = getLabObj.filter(item => item.parentId === e.courseId).map(e => e.labId);\r\n        testingArray.push({\r\n          ...e,\r\n          moduleIds: e.moduleIds.length ? e.moduleIds: null,\r\n          labId: FinalFunction(e) ? labId : getLabId[0] ? getLabId[0] : null,\r\n          isCourseComplete: FinalFunction(e),\r\n        })\r\n      })\r\n    }\r\n    else {\r\n      getLabObj.map(e => {\r\n        testingArray.push({\r\n          moduleIds: null,\r\n          courseId: e.parentId,\r\n          labId: e.labId,\r\n          isCourseComplete: false,\r\n        })\r\n      })\r\n    }\r\n    return testingArray\r\n  }\r\n\r\n  //handle coupan after the button click\r\n  const handleApplyCoupon = () => {\r\n    if (!formState.values.couponValue) {\r\n      setError(\"Please enter a valid Coupon code\")\r\n    }\r\n    else {\r\n      let one = filterIds();\r\n      setCouponLoader(true)\r\n      setCoupanValue(formState.values.couponValue);\r\n      applyCoupon({\r\n        'promoCode': formState.values.couponValue,\r\n        'moduleId': one\r\n      })\r\n    }\r\n  };\r\n\r\n  //for applying promocode\r\n  const applyCoupon = async (data) => {\r\n    const response = await new ApiHelper().FetchFromServer(\r\n      ApiRoutes.APPLYCOUPON.service,\r\n      ApiRoutes.APPLYCOUPON.url,\r\n      ApiRoutes.APPLYCOUPON.method,\r\n      ApiRoutes.APPLYCOUPON.authenticate,\r\n      authToken,\r\n      undefined,\r\n      data\r\n    );\r\n    if (response && !response.isError) {\r\n      const data = response.data.data\r\n      setCoupanCode(data)\r\n      setCouponLoader(false)\r\n      setSuccessMsg(response.data.message);\r\n      setPromoId(response.data.data.promoId)\r\n      Toast.fire({\r\n        icon: 'success',\r\n        title: response.messages[0]\r\n      })\r\n      setError(\"\")\r\n    }\r\n    else {\r\n      setError(\"\")\r\n      Toast.fire({\r\n        icon: 'error',\r\n        title: response.messages[0]\r\n      })\r\n      setCouponLoader(false)\r\n    }\r\n  }\r\n\r\n  //copying promocode\r\n  const copyToClipboard = (code) => {\r\n    navigator.clipboard.writeText(code);\r\n    Toast.fire({\r\n      icon: 'success',\r\n      title: \"Promo Code copied.\"\r\n    })\r\n  }\r\n\r\n  ///order modal opening\r\n  const orderDetailOpen = () => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      let one = filterIds()\r\n      setCheckoutModules(one)\r\n      setOrderModalOpen(true)\r\n    }\r\n  }\r\n  // const [count, setCount] = useState(0)\r\n  const handleOrderModalClose = () => {\r\n    setOrderModalOpen(false);\r\n  };\r\n  // For Cart Icon item remove\r\n  const {removeCartHandler} = useStore();\r\n  return (\r\n    <>\r\n      <Section>\r\n        {loaderDashboard ? (\r\n          <div className={classes.paymentLoader}>\r\n            <Box>\r\n              <CircularProgress />\r\n            </Box>\r\n          </div>\r\n        ) :\r\n          \"\"}\r\n        <Card className={classes.root}>\r\n          <CardHeader className={classes.cardHeader}\r\n            title={\r\n              <div className={clsx(classes.flex, classes.text_white)}>\r\n                <span>Cart</span>\r\n                <LocalMallOutlinedIcon className={classes.headingCard} />\r\n              </div>\r\n            }\r\n            titleTypographyProps={{ variant: 'h4' }}\r\n          />\r\n          <CardContent>\r\n            <div className={classes.root} className={classes.box}>\r\n              <Box width={1100} className={classes.box_shadow}>\r\n                <Grid container>\r\n                  <Grid item xs={12}>\r\n                    <TableContainer component={Paper} className={classes.collapseSmooth}>\r\n                      <Table className={classes.table} aria-label=\"simple table\" >\r\n                        <TableHead>\r\n                          <TableRow>\r\n                            <TableCell>S.No</TableCell>\r\n                            <TableCell>Course name</TableCell>\r\n                            <TableCell>Module name</TableCell>\r\n                            <TableCell>Price($)</TableCell>\r\n                            <TableCell>Remove</TableCell>\r\n                          </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                          {SelectedData && SelectedData.length ? SelectedData.map((row, index) => (\r\n                            <TableRow key={row._id}>\r\n                              <TableCell component=\"th\" scope=\"row\">\r\n                                {index + 1}\r\n                              </TableCell>\r\n                              <TableCell >{row.title}</TableCell>\r\n                              <TableCell >{row.moduleName}</TableCell>\r\n                              { !row.labId ?\r\n                                (<TableCell >{row.amount}</TableCell>)\r\n                                 :\r\n                                  isLabFree(row._id, SelectedData)\r\n                                 ? (\r\n                                    <TableCell>\r\n                                     <b>Included</b>\r\n                                    </TableCell>\r\n                                    )\r\n                                  :\r\n                                  (<TableCell >{row.amount}</TableCell>)\r\n                              }\r\n                              <TableCell >\r\n                                <div title=\"remove\">\r\n                                  {!row.labId ?\r\n                                    (<DeleteOutlineTwoToneIcon className={classes.redIcon}\r\n                                      onClick={() => {\r\n                                          deleteSelected(row._id)\r\n                                          removeCartHandler()\r\n                                        }\r\n                                      }\r\n                                    />)\r\n                                    :\r\n                                    isLabFree(row._id, SelectedData)\r\n                                    ? (<DeleteOutlineTwoToneIcon className={classes.disabledIcon} />) :\r\n                                      (<DeleteOutlineTwoToneIcon className={classes.redIcon}\r\n                                        onClick={() => {\r\n                                            deleteSelected(row._id)\r\n                                            removeCartHandler()\r\n                                          }\r\n                                        }\r\n                                      />)\r\n                                    }\r\n                                </div>\r\n                              </TableCell>\r\n                            </TableRow>\r\n                          )) : (\r\n                            <TableRow>\r\n                              <TableCell colSpan={5}>\r\n                                <div className={classes.emptyCart}>\r\n                                  <Typography\r\n                                    variant={\"h5\"}\r\n                                  >\r\n                                    Your Cart is empty\r\n                                  </Typography>\r\n                                </div>\r\n                              </TableCell>\r\n                            </TableRow>\r\n                          )\r\n                          }\r\n                        </TableBody>\r\n                      </Table>\r\n                    </TableContainer>\r\n                    <Grid container mt={5} className={classes.distance_apart}>\r\n                      {OrderTotal > 0 ? (\r\n                        <Grid item xs={6}>\r\n                          <Box display=\"flex\" justifyContent=\"center\" ml={2} mt={5}>\r\n                            <TextField\r\n                              placeholder=\"Coupon Code\"\r\n                              label=\"Coupon Code\"\r\n                              variant=\"outlined\"\r\n                              size=\"medium\"\r\n                              name=\"couponValue\"\r\n                              fullWidth\r\n                              type=\"couponValue\"\r\n                              onChange={handleChange}\r\n                              value={coupanValue ? coupanValue : formState.values.couponValue || ''}\r\n                              className={classes.apply_field}\r\n                            />\r\n                            {couponLoader ?\r\n                              <Button variant=\"contained\" color=\"secondary\" className={classes.apply_btn}>\r\n                                Processing....\r\n                              </Button>\r\n                              :\r\n                              <Button variant=\"contained\" color=\"secondary\" className={classes.apply_promo_btn} onClick={handleApplyCoupon}\r\n                              >\r\n                                Apply Code\r\n                              </Button>\r\n                            }\r\n                          </Box>\r\n                          <Box display=\"flex\" ml={2}>\r\n                            <p className={classes.error_msg}>{error}</p>\r\n                          </Box>\r\n                        </Grid>\r\n                      ) : null}\r\n                      <Grid xs={6} item mt={5} className={classes.centering}>\r\n                        {OrderTotal > 0 ? (\r\n                          < Grid xs={12} item>\r\n                            <Box\r\n                              display=\"flex\"\r\n                              alignItems=\"center\"\r\n                              justifyContent=\"space-between\"\r\n                              className={classes.calculationBlock}\r\n                              mt={5}\r\n                            >\r\n                              <Box className={classes.calcTitle}>\r\n                                Order total:\r\n                              </Box>\r\n                              <Box className={classes.calcValue}>\r\n                                {/* {getTotal(SelectedData) ? `$${getTotal(SelectedData).toFixed(2)}` : 'N.A'} */}\r\n                                {getOrderTotal(SelectedData) ? `$${getTotal(SelectedData).toFixed(2)}` : 'N.A'}\r\n                              </Box>\r\n                            </Box>\r\n                            <Box\r\n                              display=\"flex\"\r\n                              alignItems=\"center\"\r\n                              justifyContent=\"space-between\"\r\n                              className={classes.calculationBlock}\r\n                            >\r\n                              <Box className={classes.calcTitle}>\r\n                                Coupon Discount:\r\n                              </Box>\r\n                              <Box className={classes.calcValue}>\r\n                                ${coupanCode.discountedAmount ? coupanCode.discountedAmount.toFixed(2) : \"0.00\"}\r\n                              </Box>\r\n                            </Box>\r\n                            <Box\r\n                              display=\"flex\"\r\n                              alignItems=\"center\"\r\n                              justifyContent=\"space-between\"\r\n                              className={classes.calculationBlock}\r\n                            >\r\n                              <Box className={classes.calcTitle}>\r\n                                Grand total:\r\n                              </Box>\r\n                              <Box className={classes.calcValue}>\r\n                                {coupanCode.grandTotal ? `$${coupanCode.grandTotal.toFixed(2)}` :\r\n                                  getTotal(SelectedData) ? `$${getTotal(SelectedData).toFixed(2)}` : \"0.00\"}\r\n                              </Box>\r\n                            </Box>\r\n                          </Grid>\r\n                        ) : null}\r\n                      </Grid>\r\n                    </Grid>\r\n                    <Box className={classes.buttonBox}>\r\n                      <Box my={1} mx={2} className={classes.rightSide}>\r\n                        <Link href='/courses'>\r\n                          <a className={clsx(classes.commonBtn)}>Continue Shopping</a>\r\n                        </Link>\r\n                      </Box>\r\n                      {OrderTotal > 0 ? (\r\n                        <Box my={1} mx={2} className={classes.rightSide}>\r\n                          <Button\r\n                            variant={\"outlined\"}\r\n                            onClick={orderDetailOpen}\r\n                            className={classes.commonBtn}\r\n                          >\r\n                            Checkout\r\n                          </Button>\r\n                        </Box>\r\n                      ) : null}\r\n                    </Box>\r\n                  </Grid>\r\n                </Grid>\r\n              </Box>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </Section>\r\n      <Modal\r\n        fullWidth={false}\r\n        maxWidth={\"sm\"}\r\n        open={orderModalOpen}\r\n        handleClose={!cancelBtn ? handleOrderModalClose : null}\r\n        iFrame={false}\r\n        title={\"\"}\r\n        content={\r\n          <OrderDetail\r\n            modualData=\"this\"\r\n            selectedId={checkoutModules}\r\n            courseId=\"\"\r\n            handleOrderModalClose={handleOrderModalClose}\r\n            courseTitle=\"\"\r\n            promoId={promoId ? promoId :null}\r\n            handleLoader={handleLoader}\r\n            handleCancelBtn={handleCancelBtn}\r\n            authToken={authToken}\r\n          />\r\n        }\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AddCard;\r\n"]},"metadata":{},"sourceType":"module"}